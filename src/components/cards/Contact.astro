---
import { Image } from "astro:assets";
import contactLogo from '../../assets/img/contact.png';
---

<div class="item item-with-gradient contact place-content-center" onclick="contact.showModal()">
    <Image src={contactLogo} alt="contact logo" class="object-cover mx-auto w-28 mt-10" />
    <div class="bg-gradient-to-t from-white via-black to-black" />
</div>

<dialog id="contact" class="modal" data-theme="light">
    <div class="modal-box max-w-none lg:w-1/2 w-1/1">
        <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
        </form>
        <div class="flex flex-wrap justify-center items-center mb-2 pb-4">
            <div class="flex-auto w-80">
                <hr class="w-16 h-1 bg-info border-0 rounded mb-2">
                <h1 class="font-bold text-6xl text-black">Contacto</h1>
                <h4 class="font-normal text-2xl italic">Drop a line. I promise I'll pick it up (eventually)</h4>
            </div>
        </div>
        <div class="flex flex-wrap justify-center items-center">
            <a role="button" id="email" href="mailto:nunezruizadrian@gmail.com" class="btn m-2">
                nunezruizadrian@gmail.com
            </a>
            <div class="tooltip email-tooltip mr-2">
                <svg class="w-6 h-6 copy-email" viewBox="0 0 24 24" fill="currentColor" transform="matrix(-1, 0, 0, 1, 0, 0)"><path d="M15.24 2H11.3458C9.58159 1.99999 8.18418 1.99997 7.09054 2.1476C5.96501 2.29953 5.05402 2.61964 4.33559 3.34096C3.61717 4.06227 3.29833 4.97692 3.14701 6.10697C2.99997 7.205 2.99999 8.60802 3 10.3793V16.2169C3 17.725 3.91995 19.0174 5.22717 19.5592C5.15989 18.6498 5.15994 17.3737 5.16 16.312L5.16 11.3976L5.16 11.3024C5.15993 10.0207 5.15986 8.91644 5.27828 8.03211C5.40519 7.08438 5.69139 6.17592 6.4253 5.43906C7.15921 4.70219 8.06404 4.41485 9.00798 4.28743C9.88877 4.16854 10.9887 4.1686 12.2652 4.16867L12.36 4.16868H15.24L15.3348 4.16867C16.6113 4.1686 17.7088 4.16854 18.5896 4.28743C18.0627 2.94779 16.7616 2 15.24 2Z" fill="#000000"></path> <path d="M6.6001 11.3974C6.6001 8.67119 6.6001 7.3081 7.44363 6.46118C8.28716 5.61426 9.64481 5.61426 12.3601 5.61426H15.2401C17.9554 5.61426 19.313 5.61426 20.1566 6.46118C21.0001 7.3081 21.0001 8.6712 21.0001 11.3974V16.2167C21.0001 18.9429 21.0001 20.306 20.1566 21.1529C19.313 21.9998 17.9554 21.9998 15.2401 21.9998H12.3601C9.64481 21.9998 8.28716 21.9998 7.44363 21.1529C6.6001 20.306 6.6001 18.9429 6.6001 16.2167V11.3974Z" fill="#000000"></path> </svg>
            </div>
            <a role="button" id="phone" href="tel:+34638988757" class="btn m-2">
                638 98 87 57
            </a>
            <div class="tooltip phone-tooltip mr-2">
                <svg class="w-6 h-6 copy-phone" viewBox="0 0 24 24" fill="currentColor" transform="matrix(-1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M15.24 2H11.3458C9.58159 1.99999 8.18418 1.99997 7.09054 2.1476C5.96501 2.29953 5.05402 2.61964 4.33559 3.34096C3.61717 4.06227 3.29833 4.97692 3.14701 6.10697C2.99997 7.205 2.99999 8.60802 3 10.3793V16.2169C3 17.725 3.91995 19.0174 5.22717 19.5592C5.15989 18.6498 5.15994 17.3737 5.16 16.312L5.16 11.3976L5.16 11.3024C5.15993 10.0207 5.15986 8.91644 5.27828 8.03211C5.40519 7.08438 5.69139 6.17592 6.4253 5.43906C7.15921 4.70219 8.06404 4.41485 9.00798 4.28743C9.88877 4.16854 10.9887 4.1686 12.2652 4.16867L12.36 4.16868H15.24L15.3348 4.16867C16.6113 4.1686 17.7088 4.16854 18.5896 4.28743C18.0627 2.94779 16.7616 2 15.24 2Z" fill="#000000"></path> <path d="M6.6001 11.3974C6.6001 8.67119 6.6001 7.3081 7.44363 6.46118C8.28716 5.61426 9.64481 5.61426 12.3601 5.61426H15.2401C17.9554 5.61426 19.313 5.61426 20.1566 6.46118C21.0001 7.3081 21.0001 8.6712 21.0001 11.3974V16.2167C21.0001 18.9429 21.0001 20.306 20.1566 21.1529C19.313 21.9998 17.9554 21.9998 15.2401 21.9998H12.3601C9.64481 21.9998 8.28716 21.9998 7.44363 21.1529C6.6001 20.306 6.6001 18.9429 6.6001 16.2167V11.3974Z" fill="#000000"></path> </g></svg>
            </div>
        </div>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>

<style>
    .contact, .copy-email, .copy-phone {
        cursor: pointer;
    }
    button:focus {
        outline: 0;
    }
    .card-logo p {
        font-size: 100px;
    }
    svg {
        opacity: 75%;
        transition: .5s ease-out;
        -moz-transition: .5s ease-out;
        -webkit-transition: .5s ease-out;
        -o-transition: .5s ease-out;
        
        &:hover {
            opacity: 100%;
        }
    }
    
    img {
        margin-left: 2.3rem;
    }
</style>

<script>
    document.querySelector('.copy-email')?.addEventListener("click", async () => {
        const inputValue = (document.getElementById("email") as HTMLInputElement).innerHTML;
        await copyCode(inputValue);
        
        var tooltip = document.querySelector('.email-tooltip') as HTMLElement;
        
        // Primero le ponemos el mensaje del tooltip
        tooltip.classList.add('tooltip-open');
        tooltip.dataset.tip = 'Copiado';
        
        // Ahora se lo quitamos pasado 1 seg
        setTimeout(() => {
            tooltip.classList.remove('tooltip-open');
            delete tooltip.dataset.tip;
        }, 1500);
    });
    
    document.querySelector('.copy-phone')?.addEventListener("click", async () => {
        const inputValue = (document.getElementById("phone") as HTMLInputElement).innerHTML;
        await copyCode(inputValue);

        var tooltip = document.querySelector('.phone-tooltip') as HTMLElement;
        
        // Primero le ponemos el mensaje del tooltip
        tooltip.classList.add('tooltip-open');
        tooltip.dataset.tip = 'Copiado';
        
        // Ahora se lo quitamos pasado 1 seg
        setTimeout(() => {
            tooltip.classList.remove('tooltip-open');
            delete tooltip.dataset.tip;
        }, 1500);
    });
    
    async function copyCode(value : any) {
        await navigator.clipboard.writeText(value);
    }
</script>